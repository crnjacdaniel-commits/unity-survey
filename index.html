<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Umfrage</title>
</head>
<body>
  <h1>Umfrage</h1>
  <form id="survey"></form>
  <button id="submitBtn">Absenden</button>

  <script>
    const API = "https://script.google.com/macros/s/AKfycbxtQpl6PehXIhyD_iM4FpiRyr7YBYhWVzZjnbjWnQpb_ewFwvBjwi07clq-NqbQJ7hhIA/exec";

    async function loadOptions() {
      const res = await fetch("options.json"); // Unity aktualisiert diese Datei
      const options = await res.json();
      const form = document.getElementById("survey");
      form.innerHTML = options.map(o =>
        `<label><input type="radio" name="answer" value="${o.id}"> ${o.text}</label><br>`
      ).join('');
    }

    document.getElementById("submitBtn").onclick = async () => {
      const chosen = document.querySelector('input[name="answer"]:checked');
      if (!chosen) return alert("Bitte eine Antwort ausw√§hlen.");
      const payload = { questionId: "q1", answer: chosen.value, userId: "" };
      const res = await fetch(API, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });
      const ok = await res.json();
      alert(ok.ok ? "Danke!" : "Fehler beim Senden");
    };

    loadOptions();
  </script>
</body>
</html>
